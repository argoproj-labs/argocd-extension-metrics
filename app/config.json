{
  "prometheus": {
    "applications": [
      {
        "name": "default",
        "default": true,
        "dashboards": [
          {
            "groupKind": "rollout",
            "tabs": ["Golden Signal"],
            "rows": [
              {
                "name": "httplatency",
                "title": "HTTP Latency",
                "tab": "Golden Signal",
                "graphs": [
                  {
                    "name": "http_200_latency",
                    "title": "Latency",
                    "description": "",
                    "graphType": "line",
                    "metricName": "__name__",
                    "queryExpression": "namespace_argocd_app_pod_http_server_requests_latency {namespace=\"{{.namespace}}\"}"
                  }
                ]
              },
              {
                "name": "httperrortate",
                "title": "HTTP Error Rate",
                "tab": "Golden Signal",
                "graphs": [
                  {
                    "name": "http_error_rate_500",
                    "title": "HTTP Error 500",
                    "description": "",
                    "graphType": "line",
                    "metricName": "__name__",
                    "queryExpression": "namespace_argocd_app_pod_http_server_requests_errors_5xx {namespace=\"{{.namespace}}\"}"
                  },
                  {
                    "name": "http_error_rate_400",
                    "title": "HTTP Error 400",
                    "description": "",
                    "graphType": "line",
                    "metricName": "__name__",
                    "queryExpression": "namespace_argocd_app_pod_http_server_requests_errors_4xx {namespace=\"{{.namespace}}\"}"
                  }
                ]
              },
              {
                "name": "httptraffic",
                "title": "HTTP Traffic",
                "tab": "Golden Signal",
                "graphs": [
                  {
                    "name": "http_traffic",
                    "title": "Traffic",
                    "description": "",
                    "graphType": "line",
                    "metricName": "__name__",
                    "queryExpression": "namespace_argocd_app_pod_http_server_requests_count {namespace=\"{{.namespace}}\"}"
                  }
                ]
              },
              {
                "name": "pod",
                "title": "Pods",
                "tab": "Golden Signal",
                "graphs": [
                  {
                    "name": "pod_cpu_line",
                    "title": "CPU (cores)",
                    "description": "",
                    "graphType": "line",
                    "metricName": "pod",
                    "queryExpression": "sum by(pod) (namespace_argocd_pod_container_cpu_usage_seconds_total {pod=~\"falco-daemonset-.*\"})",
                    "thresholds": [
                      {
                        "queryExpression":"sum (namespace_argocd_pod_cpu_resource_requests {pod=~\"falco-daemonset-.*\"})/count(count by(pod) (namespace_argocd_pod_cpu_resource_requests {pod=~\"falco-daemonset-.*\"}))",
                        "name": "CPU_REQUESTS",
                        "unit": "cores",
                        "color": "green"
                      },
                      {
                        "queryExpression":"sum(namespace_argocd_pod_cpu_resource_limits {pod=~\"falco-daemonset-.*\"})/count(count by(pod) (namespace_argocd_pod_cpu_resource_limits {pod=~\"falco-daemonset-.*\"}))",
                        "name": "CPU_LIMITS",
                        "unit": "cores",
                        "color": "red"
                      },
                      {
                        "name": "dummy",
                        "unit": "cores",
                        "value": "50",
                        "color": "grey"
                      }
                    ]
                  },
                  {
                    "name": "pod_cpu_pie",
                    "title": "CPU Avg",
                    "description": "",
                    "graphType": "pie",
                    "metricName": "pod",
                    "queryExpression": "sum by(pod) (namespace_argocd_pod_container_cpu_usage_seconds_total {pod=~\"falco-daemonset-.*\"})"
                  },
                  {
                    "name": "pod_memory_line",
                    "title": "Memory (mib)",
                    "description": "",
                    "graphType": "line",
                    "metricName": "pod",
                    "queryExpression": "sum by(pod) (namespace_argocd_pod_memory_usage_mebibyte {pod=~\"falco-daemonset-.*\"})",
                    "thresholds": [
                      {
                        "queryExpression": "sum(namespace_argocd_pod_memory_resource_requests {pod=~\"falco-daemonset-.*\"})/count(count by(pod) (namespace_argocd_pod_memory_resource_requests {pod=~\"falco-daemonset-.*\"}))",
                        "name": "MEMORY_REQUESTS",
                        "unit": "mib",
                        "color": "blue"
                      },
                      {
                        "queryExpression": "sum(namespace_argocd_pod_memory_resource_limits {pod=~\"falco-daemonset-.*\"})/count(count by(pod) (namespace_argocd_pod_memory_resource_limits {pod=~\"falco-daemonset-.*\"}))",
                        "name": "MEMORY_LIMITS",
                        "unit": "mib",
                        "color": "red"
                      }
                    ]
                  },
                  {
                    "name": "pod_memory_pie",
                    "title": "Mem Avg",
                    "description": "",
                    "graphType": "pie",
                    "metricName": "pod",
                    "queryExpression": "sum by(pod) (namespace_argocd_pod_memory_usage_mebibyte {pod=~\"falco-daemonset-.*\"})"
                  }
                ]
              }
            ],
            "intervals": ["1h", "2h", "6h"]
          },
          {
            "groupKind": "pod",
            "tabs": ["GoldenSignal"],
            "rows": [
              {
                "name": "pod",
                "title": "Pods",
                "tab": "GoldenSignal",
                "graphs": [
                  {
                    "name": "pod_cpu_line",
                    "title": "CPU",
                    "description": "",
                    "graphType": "line",
                    "metricName": "container",
                    "queryExpression": "namespace_argocd_pod_container_cpu_usage_seconds_total {pod=\"mayally0328-rollout-789c75b5d9-5m9q9\"}"
                  },
                  {
                    "name": "pod_cpu_pie",
                    "title": "CPU Avg",
                    "description": "",
                    "graphType": "pie",
                    "metricName": "pod",
                    "queryExpression": "sum(rate(container_cpu_usage_seconds_total{pod=~\"chaos-agent-6786db5456-dqvkh\", container!=\"POD\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                  },
                  {
                    "name": "pod_memory_line",
                    "title": "Memory",
                    "description": "",
                    "graphType": "line",
                    "metricName": "pod",
                    "queryExpression": "namespace_argocd_pod_memory_usage_mebibyte {pod=\"mayally0328-rollout-789c75b5d9-5m9q9\"}"
                  },
                  {
                    "name": "pod_memory_pie",
                    "title": "Mem Avg",
                    "description": "",
                    "graphType": "pie",
                    "metricName": "pod",
                    "queryExpression": "sum(rate(container_memory_usage_bytes{pod=~\"chaos-agent-6786db5456-dqvkh\", container!=\"POD\", image!=\"\", container!=\"\", container_name!=\"POD\"}[5m])) by (pod)"
                  }
                ]
              }
                ]
          },
          {
            "groupKind": "deployment",
            "tabs": ["Golden Signal"],
            "rows": [
              {
                "name": "httplatency",
                "title": "HTTP Latency",
                "tab": "Golden Signal",
                "graphs": [
                  {
                    "name": "http_200_latency",
                    "title": "Latency",
                    "description": "",
                    "graphType": "line",
                    "metricName": "__name__",
                    "queryExpression": "namespace_argocd_app_pod_http_server_requests_latency {namespace=\"{{.namespace}}\"}"
                  }
                ]
              },
              {
                "name": "httperrortate",
                "title": "HTTP Error Rate",
                "tab": "Golden Signal",
                "graphs": [
                  {
                    "name": "http_error_rate_500",
                    "title": "HTTP Error 500",
                    "description": "",
                    "graphType": "line",
                    "metricName": "__name__",
                    "queryExpression": "namespace_argocd_app_pod_http_server_requests_errors_5xx {namespace=\"{{.namespace}}\"}"
                  },
                  {
                    "name": "http_error_rate_400",
                    "title": "HTTP Error 400",
                    "description": "",
                    "graphType": "line",
                    "metricName": "__name__",
                    "queryExpression": "namespace_argocd_app_pod_http_server_requests_errors_4xx {namespace=\"{{.namespace}}\"}"
                  }
                ]
              },
              {
                "name": "httptraffic",
                "title": "HTTP Traffic",
                "tab": "Golden Signal",
                "graphs": [
                  {
                    "name": "http_traffic",
                    "title": "Traffic",
                    "description": "",
                    "graphType": "line",
                    "metricName": "__name__",
                    "queryExpression": "namespace_argocd_app_pod_http_server_requests_count {namespace=\"{{.namespace}}\"}"
                  }
                ]
              },
              {
                "name": "pod",
                "title": "Pods",
                "tab": "Golden Signal",
                "graphs": [
                {
                  "name": "pod_cpu_line",
                  "title": "CPU (cores)",
                  "description": "",
                  "graphType": "line",
                  "metricName": "pod",
                  "queryExpression": "{__name__=~\"namespace_argocd_pod_container_cpu_usage_seconds_total\",  pod=~\"chaos-agent-6786db5456-vf8z8\"}",
                  "thresholds": [
                    {
                      "value":"{__name__=~\"namespace_argocd_pod_cpu_resource_requests\",  pod=~\"chaos-agent-6786db5456-vf8z8\"}",
                      "name": "CPU_REQUESTS",
                      "unit": "cores"
                    },
                    {
                      "value":"{__name__=~\"namespace_argocd_pod_cpu_resource_limits\",  pod=~\"chaos-agent-6786db5456-vf8z8\"}",
                      "name": "CPU_LIMITS",
                      "unit": "cores"
                    }
                  ]
                },
                {
                  "name": "pod_cpu_pie",
                  "title": "CPU Avg",
                  "description": "",
                  "graphType": "pie",
                  "metricName": "pod",
                  "queryExpression": "namespace_argocd_pod_container_cpu_usage_seconds_total { pod=~\"chaos-agent-6786db5456-dqvkh\"}"
                },
                {
                  "name": "pod_memory_line",
                  "title": "Memory (mib)",
                  "description": "",
                  "graphType": "line",
                  "metricName": "pod",
                  "queryExpression": "{__name__=~\"namespace_argocd_pod_memory_usage_mebibyte\" , pod=~\"chaos-agent-6786db5456-vf8z8\"}",
                  "thresholds": [
                    {
                      "value": "{__name__=~\"namespace_argocd_pod_memory_resource_requests\",  pod=~\"chaos-agent-6786db5456-vf8z8\"}",
                      "name": "MEMORY_REQUESTS",
                      "unit": "mib"
                    },
                    {
                      "value": "{__name__=~\"namespace_argocd_pod_memory_resource_limits\",  pod=~\"chaos-agent-6786db5456-vf8z8\"}",
                      "name": "MEMORY_LIMITS",
                      "unit": "mib"
                    }
                    ]
                  },
                  {
                    "name": "pod_memory_pie",
                    "title": "Mem Avg",
                    "description": "",
                    "graphType": "pie",
                    "metricName": "pod",
                    "queryExpression": "namespace_argocd_pod_memory_usage_mebibyte { pod=~\"chaos-agent-6786db5456-dqvkh\"}"
                  }
                ]
              }
            ],
            "intervals": ["1h", "2h", "6h"]
          }
        ]
      }
    ],
    "provider": {
      "Name": "default",
      "default": true,
      "address": "http://localhost:9090"
    }
  }
}